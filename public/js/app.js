webpackJsonp([0],{188:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var s=a(86),r=n(s),o=a(87),i=n(o),c=a(28),l=n(c),u=a(88);(0,u.render)(l.default.createElement(r.default,null),document.getElementById("camera")),(0,u.render)(l.default.createElement(i.default,null),document.getElementById("findFace"))},49:function(e,t,a){"use strict";t.getOrientation=function(e,t){var a=new FileReader;a.onload=function(e){var a=new DataView(e.target.result);if(65496!=a.getUint16(0,!1))return t(-2);for(var n=a.byteLength,s=2;s<n;){var r=a.getUint16(s,!1);if(s+=2,65505==r){if(1165519206!=a.getUint32(s+=2,!1))return t(-1);var o=18761==a.getUint16(s+=6,!1);s+=a.getUint32(s+4,o);var i=a.getUint16(s,o);s+=2;for(var c=0;c<i;c++)if(274==a.getUint16(s+12*c,o))return t(a.getUint16(s+12*c+8,o))}else{if(65280!=(65280&r))break;s+=a.getUint16(s,!1)}}return t(-1)},a.readAsArrayBuffer(e)}},50:function(e,t,a){"use strict";t.resizeImage=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,s=e,r=t,o=e/t;return s>a&&(s=a,r=~~(s/o)),r>n&&(o=e/t,r=n,s=~~(r*o)),{sw:s,sh:r}},t.toImg=function(e){var t=document.createElement("img");return t.src=e,t},t.toPng=function(e){var t=document.createElement("img");return t.src=e.toDataURL("image/png"),t}},51:function(e,t,a){"use strict";t.serializeImage=function(e){var t=";base64,";if(e.indexOf(t)==-1){var a=e.split(","),n=a[0].split(":")[1],s=decodeURIComponent(a[1]);return new Blob([s],{type:n})}for(var r=e.split(t),o=r[0].split(":")[1],i=window.atob(r[1]),c=i.length,l=new Uint8Array(c),u=0;u<c;++u)l[u]=i.charCodeAt(u);return new Blob([l],{type:o})}},86:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(28),l=n(c),u=a(52),d=n(u),f=a(56),p=n(f),m=a(83),g=n(m),h=a(50),v=h.resizeImage,y=(h.toPng,h.toImg,a(49)),b=y.getOrientation,D=a(51),I=D.serializeImage,E=function(e){function t(){s(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={imageLoaded:!1,imageCanvasDisplay:"none",spinnerDisplay:!1,imageCanvasWidth:"28px",imageCanvasHeight:"320px",faceApiText:null,updateFeedback:"",storingFace:!1,userData:"",detectedFaces:null,faceDataFound:!1,currentImg:null},e.putImage=e.putImage.bind(e),e.takePhoto=e.takePhoto.bind(e),e.faceRecog=e.faceRecog.bind(e),e.uploadImage=e.uploadImage.bind(e),e.createPersistedFaceID=e.createPersistedFaceID.bind(e),e.addPersonFace=e.addPersonFace.bind(e),e.createPerson=e.createPerson.bind(e),e.trainGroup=e.trainGroup.bind(e),e}return o(t,e),i(t,[{key:"putImage",value:function(e,t){var a=this.refs.photoCanvas,n=(a.getContext("2d"),e.width),s=e.height,r=v(n,s),o=r.sw,i=r.sh,c=document.createElement("canvas"),l=c.getContext("2d");c.width=o,c.height=i,l.drawImage(e,0,0,o,i),p.default.drawCanvas(a,e,t,o,i,1,0,!1)}},{key:"takePhoto",value:function(e){var t=this,a=(this.refs.camera,e.target.files),n=void 0;if(a&&a.length>0){n=a[0];var s=new FileReader;this.putImage;s.onload=function(e){var a=new Image;a.src=e.target.result;a.onload=function(){b(n,function(e){e<0&&(e=1),t.putImage(a,e),t.setState({imageLoaded:!0,currentImg:a.src}),t.faceRecog()})}},s.readAsDataURL(n)}}},{key:"faceRecog",value:function(){var e=this,t=this.refs.photoCanvas;t.toDataURL();this.setState({spinnerDisplay:!0}),g.default.post("https://westus.api.cognitive.microsoft.com/face/v1.0/detect?returnFaceId=true&returnFaceLandmarks=false").send(I(this.state.currentImg)).set("Content-Type","application/octet-stream").set("Ocp-Apim-Subscription-Key","286fe5360c85463bac4315dff365fdc2").set("processData",!1).set("Accept","application/json").end(function(t,a){if(t||!a.ok)console.error(t);else{var n=JSON.stringify(a.body);console.log(n);var s=a.body.map(function(e){return{faceId:e.faceId,target:""+e.faceRectangle.top+","+e.faceRectangle.left+","+e.faceRectangle.width+","+e.faceRectangle.height,faceRectangle:e.faceRectangle}});e.setState({detectedFaces:s,faceApiText:n,faceDataFound:!0,spinnerDisplay:!1})}})}},{key:"createPersistedFaceID",value:function(){var e=this,t=this.refs.photoCanvas;t.toDataURL(),this.state.userData;return new Promise(function(t,a){g.default.post("https://westus.api.cognitive.microsoft.com/face/v1.0/facelists/aspc2017faces/persistedFaces").send(I(e.state.currentImg)).set("Content-Type","application/octet-stream").set("Ocp-Apim-Subscription-Key","286fe5360c85463bac4315dff365fdc2").set("Accept","application/json").end(function(e,a){e||!a.ok?console.error(e):t(a.body)})})}},{key:"createPerson",value:function(){var e=this;this.state.userData;return new Promise(function(t,a){g.default.post("https://westus.api.cognitive.microsoft.com/face/v1.0/persongroups/aspc2017facegroup/persons").send({name:e.refs.inputname.value,userData:e.refs.inputdata.value}).set("Ocp-Apim-Subscription-Key","286fe5360c85463bac4315dff365fdc2").set("Content-Type","application/json").set("Accept","application/json").end(function(e,a){if(e||!a.ok)console.error(e);else{JSON.stringify(a.body);t(a.body.personId)}})})}},{key:"trainGroup",value:function(){this.state.userData;return new Promise(function(e,t){g.default.post("https://westus.api.cognitive.microsoft.com/face/v1.0/persongroups/aspc2017facegroup/train").set("Ocp-Apim-Subscription-Key","286fe5360c85463bac4315dff365fdc2").set("Content-Type","application/json").set("Accept","application/json").end(function(t,a){t||!a.ok?alert(t):e(a)})})}},{key:"addPersonFace",value:function(e,t){var a=this;this.state.userData;return new Promise(function(t,n){g.default.post("https://westus.api.cognitive.microsoft.com/face/v1.0/persongroups/aspc2017facegroup/persons/"+e+"/persistedFaces").send(I(a.state.currentImg)).set("Content-Type","application/octet-stream").set("Ocp-Apim-Subscription-Key","286fe5360c85463bac4315dff365fdc2").set("Accept","application/json").end(function(e,a){if(e||!a.ok)console.error(e);else{var n=JSON.stringify(a.body);t(n)}})})}},{key:"uploadImage",value:function(){var e=this;this.setState({spinnerDisplay:!0,storingFace:!0,updateFeedback:"Creating a face ID"}),this.createPersistedFaceID().then(function(t){e.setState({updateFeedback:"Creating a Person"}),e.createPerson().then(function(a){e.setState({updateFeedback:"Adding the face to the person"}),e.addPersonFace(a).then(function(n){e.setState({updateFeedback:"Training the new list"}),e.trainGroup().then(function(){e.setState({updateFeedback:""}),console.log("success"),console.log("persistedFaceId",t),console.log("personId",a),console.log("persistedGroupFaceId",n),window.location.href="/#uploaded"})}).catch(function(e){alert(JSON.stringify(e))})}).catch(function(e){alert(JSON.stringify(e))})}).catch(function(e){alert(JSON.stringify(e))})}},{key:"render",value:function(){var e=(0,d.default)({hidden:!this.state.faceDataFound,cameraFrame:!0}),t=(0,d.default)({hidden:this.state.imageLoaded}),a=(0,d.default)({hidden:!this.state.spinnerDisplay}),n=(0,d.default)({spinner:!0}),s=(0,d.default)({hidden:!this.state.faceDataFound,metaInput:!0}),r=(0,d.default)({hidden:this.state.storingFace}),o=(0,d.default)({hidden:!this.state.storingFace&&""!==this.state.updateFeedback});return l.default.createElement("div",null,l.default.createElement("div",{className:"center vertical-aligned"},l.default.createElement("div",{className:t},l.default.createElement("label",{className:"camera-snap"},l.default.createElement("img",{src:"/assets/camera_bw.svg",className:"icon-camera",alt:"Click to snap a photo or select an image from your photo roll"}),l.default.createElement("input",{type:"file",label:"Camera",onChange:this.takePhoto,ref:"camera",className:"camera",accept:"image/*"}))),l.default.createElement("div",{className:o},this.state.updateFeedback),l.default.createElement("div",{className:a},l.default.createElement("div",{className:n},l.default.createElement("div",{className:"double-bounce1"}),l.default.createElement("div",{className:"double-bounce2"}))),l.default.createElement("div",{className:r},l.default.createElement("div",{className:e},l.default.createElement("canvas",{ref:"photoCanvas",className:"imageCanvas"},"Your browser does not support the HTML5 canvas tag.")),l.default.createElement("div",{className:s},l.default.createElement("label",{htmlFor:"name"},"NAME"),l.default.createElement("input",{id:"name",type:"text",ref:"inputname",className:"darkInput"}),l.default.createElement("label",{htmlFor:"metadata"},"METADATA"),l.default.createElement("textarea",{id:"metadata",ref:"inputdata",className:"darkInput"}),l.default.createElement("label",{htmlFor:"addBtn"}),l.default.createElement("button",{id:"addBtn",className:"darkButton",onClick:this.uploadImage,value:"add"},"ADD")))))}}]),t}(l.default.Component);t.default=E},87:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(s,r){try{var o=t[s](r),i=o.value}catch(e){return void a(e)}return o.done?void e(i):Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(28),d=n(u),f=a(52),p=n(f),m=a(56),g=n(m),h=a(83),v=n(h),y=a(50),b=y.resizeImage,D=(y.toPng,y.toImg,a(49)),I=D.getOrientation,E=a(51),w=E.serializeImage,k=a(184),F=function(e){var t=e.target.form.message.value,a=e.target.form.receivers[e.target.form.receivers.selectedIndex].value;return fetch("/sendMessage",{method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify({message:t,receiverId:a})})},N=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={imageLoaded:!1,imageCanvasDisplay:"none",clickedTheButton:!1,spinnerDisplay:!1,imageCanvasWidth:"28px",imageCanvasHeight:"320px",faceApiText:null,userData:"",faceDataFound:!1,showMessageForm:!1,messageSent:!1,currentImg:null},e.putImage=e.putImage.bind(e),e.takePhoto=e.takePhoto.bind(e),e.faceIdentify=e.faceIdentify.bind(e),e.verifyFaces=e.verifyFaces.bind(e),e.uploadImage=e.uploadImage.bind(e),e.handleUploadimage=e.handleUploadimage.bind(e),e.setImage=e.setImage.bind(e),e.getPersonDetails=e.getPersonDetails.bind(e),e.uploadDlg=null,e.camera=null,e}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.camera&&this.camera.click()}},{key:"putImage",value:function(e,t){console.log("putImage");var a=this.refs.photoCanvas,n=(a.getContext("2d"),e.width),s=e.height,r=b(n,s),o=r.sw,i=r.sh,c=document.createElement("canvas"),l=c.getContext("2d");c.width=o,c.height=i,l.drawImage(e,0,0,o,i),g.default.drawCanvas(a,e,t,o,i,1,0,!1)}},{key:"takePhoto",value:function(e){var t=this,a=(this.refs.camera,e.target.files),n=void 0;if(a&&a.length>0){n=a[0];var s=new FileReader;this.putImage;s.onload=function(e){var a=new Image;a.src=e.target.result;a.onload=function(){I(n,function(e){e<0&&(e=1),t.putImage(a,e),t.setState({imageLoaded:!0,clickedTheButton:!0,currentImg:a.src}),t.faceIdentify()})}},s.readAsDataURL(n)}}},{key:"setImage",value:function(e){var t=this,a=(this.refs.camera,new FileReader);a.onload=function(e){var a=new Image;a.src=e.target.result;a.onload=function(){t.setState({currentImg:a.src})}},a.readAsDataURL(e)}},{key:"handleUploadimage",value:function(e,t){var a=this;this.setState({spinnerDisplay:!0,imageLoaded:!1});var n=(this.state.form_id,e.target.files[0]),s=/image.*/;if(n.type.match(s)){var r=new FormData;r.append("file",n),fetch("/verifyPhoto",{method:"POST",body:r}).then(function(e){return e.json()},function(e){return e.message}).then(function(e){a.setState({personDetails:e.persons[0],spinnerDisplay:!1,imageLoaded:!0,showMessageForm:!0})}).catch(function(e){console.log(e)})}}},{key:"faceIdentify",value:function(){var e=this,t=this.refs.photoCanvas;t.toDataURL();this.setState({spinnerDisplay:!0,imageLoaded:!1}),v.default.post("https://westus.api.cognitive.microsoft.com/face/v1.0/detect?returnFaceId=true&returnFaceLandmarks=false").send(w(this.state.currentImg)).set("Content-Type","application/octet-stream").set("Ocp-Apim-Subscription-Key","286fe5360c85463bac4315dff365fdc2").set("processData",!1).set("Accept","application/json").end(function(t,a){if(t||!a.ok)console.error(t);else{var n=a.body.map(function(e){return e.faceId});e.setState({faces:n}),n.length?e.verifyFaces(n):e.setState({personDetails:{userData:"No faces found"},spinnerDisplay:!1,imageLoaded:!0})}})}},{key:"verifyFaces",value:function(e){var t=this;console.log("verifyFaces"),this.setState({imageLoaded:!1});var a={personGroupId:"aspc2017facegroup",faceIds:e,maxNumOfCandidatesReturned:1,confidenceThreshold:.5};v.default.post("https://westus.api.cognitive.microsoft.com/face/v1.0/identify").send(a).set("Content-Type","application/json").set("Ocp-Apim-Subscription-Key","286fe5360c85463bac4315dff365fdc2").set("Accept","application/json").end(function(e,a){e||!a.ok?console.error(e):a.body.length<0?t.setState({personDetails:{userData:"No match found"},spinnerDisplay:!1,imageLoaded:!0}):a.body[0].candidates.length?t.getPersonDetails(a.body[0].candidates[0].personId):t.setState({personDetails:{userData:"Face found, but it was not recognized"},spinnerDisplay:!1,imageLoaded:!0})})}},{key:"getPersonDetails",value:function(e){var t=this;console.log("getPersonDetails"),v.default.get("https://westus.api.cognitive.microsoft.com/face/v1.0/persongroups/aspc2017facegroup/persons/"+e).set("Ocp-Apim-Subscription-Key","286fe5360c85463bac4315dff365fdc2").set("Accept","application/json").end(function(e,a){e||!a.ok?console.error(e):t.setState({personDetails:a.body,spinnerDisplay:!1,imageLoaded:!0})})}},{key:"uploadImage",value:function(){console.log("uploadImage");var e=this.refs.photoCanvas,t=(e.toDataURL(),this.state.userData);v.default.post("https://westus.api.cognitive.microsoft.com/face/v1.0/facelists/aspc2017faces/persistedFaces?userData="+JSON.stringify(t)).send(w(this.state.currentImg)).set("Content-Type","application/octet-stream").set("Ocp-Apim-Subscription-Key","286fe5360c85463bac4315dff365fdc2").set("Accept","application/json").end(function(e,t){if(e||!t.ok)console.error(e);else{var a=JSON.stringify(t.body);console.log(a),alert(a),window.location.href="/#uploaded"}})}},{key:"handleClick",value:function(e){e.preventDefault(),this.uploadDlg.click()}},{key:"render",value:function(){var e=this,t=((0,p.default)({hidden:!this.state.imageLoaded,cameraFrame:!0}),(0,p.default)({hidden:this.state.clickedTheButton})),a=(0,p.default)({hidden:!this.state.spinnerDisplay}),n=(0,p.default)({spinner:!0}),s=(0,p.default)({hidden:this.state.spinnerDisplay,metaInput:!0});return d.default.createElement("div",null,d.default.createElement("h1",{className:"center light-color"}),d.default.createElement("div",{className:"center vertical-aligned"},d.default.createElement("form",{method:"post",encType:"multipart/form-data",className:"hide",onChange:function(t){t.preventDefault(),e.setState({clickedTheButton:!0}),e.handleUploadimage(t)},ref:function(t){e.form=t},action:"/upload"},d.default.createElement("input",{type:"file",name:"file",accept:".jpg, .jpeg, .png",ref:function(t){return e.uploadDlg=t}}),d.default.createElement("input",{type:"submit"})),d.default.createElement("div",{className:t},d.default.createElement("label",{className:"camera-snap"},d.default.createElement("img",{src:"/assets/camera.svg",className:"icon-camera",onClick:function(t){return e.handleClick(t)},alt:"Click to snap a photo or select an image from your photo roll"}))),d.default.createElement("div",{className:a},d.default.createElement("div",{className:n},d.default.createElement("div",{className:"double-bounce1"}),d.default.createElement("div",{className:"double-bounce2"}))),d.default.createElement("div",{className:s},d.default.createElement(C,c({visible:!1},this.state)),d.default.createElement(O,{visible:this.state.showMessageForm,senderId:this.state.personDetails&&this.state.personDetails.Id}),d.default.createElement(P,{visible:this.state.messageSent}))))}}]),t}(d.default.Component);t.default=N;var P=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return this.props.visible?d.default.createElement("div",null,d.default.createElement("div",{className:"qr"},"viser qr kode")):null}}]),t}(d.default.PureComponent),C=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return this.props.visible?d.default.createElement("div",null,d.default.createElement("div",{className:"personDetails"},this.props.personDetails&&this.props.personDetails.Name),d.default.createElement("div",{className:"personDetails"},this.props.personDetails&&this.props.personDetails.UserData),d.default.createElement("div",{className:"personDetails"},this.props.personDetails&&this.props.personDetails.Id),d.default.createElement("div",{className:"personDetails"},this.props.personDetails&&this.props.personDetails.Emotion),d.default.createElement("div",{className:"personDetails"},this.props.personDetails&&this.props.personDetails.Age),d.default.createElement("div",{className:"personDetails"},this.props.personDetails&&this.props.personDetails.Gender)):null}}]),t}(d.default.PureComponent),O=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={messengers:[]},e.qrcanvas=null,e.form=null,e.qrimg=null,e}return i(t,e),l(t,[{key:"componentWillMount",value:function(){var e=this;fetch("/messengers").then(function(e){return e.json()}).then(function(t){e.setState({messengers:t.persons})})}},{key:"render",value:function(){var e=this,t=(0,p.default)({hidden:!this.state.spinnerDisplay}),a=(0,p.default)({spinner:!0});return this.props.visible?d.default.createElement("div",{className:"kingsmessage"},d.default.createElement("div",{className:t},d.default.createElement("div",{className:a},d.default.createElement("div",{className:"double-bounce1"}),d.default.createElement("div",{className:"double-bounce2"}))),d.default.createElement("div",{className:"qrcanvas"},d.default.createElement("canvas",{ref:function(t){return e.qrcanvas=t},className:"qrCanvas"},"Your browser does not support the HTML5 canvas tag."),d.default.createElement("img",{src:"/assets/transparent.png",ref:function(t){e.qrimg=t}})),d.default.createElement("form",{ref:function(t){return e.form=t}},d.default.createElement("input",{type:"hidden",name:"senderId",value:this.props.senderId}),d.default.createElement("label",{htmlFor:"message"},"Your message"),d.default.createElement("textarea",{name:"message",className:"melding",defaultValue:"Kill the imp!"}),d.default.createElement("label",{htmlFor:"messengers"},"Choose your messenger"),d.default.createElement("select",{name:"messengers"},this.state.messengers.filter(function(e){return"King"!==e.Type}).map(function(e){return d.default.createElement("option",{key:k.v4(),value:e.Id},"Peasant ",e.Name)})),d.default.createElement("label",{htmlFor:"receivers"},"Whom shall receive the message?"),d.default.createElement("select",{name:"receivers"},this.state.messengers.filter(function(e){return"King"===e.Type}).map(function(e){return d.default.createElement("option",{key:k.v4(),value:e.Id},"King ",e.Name)})),d.default.createElement("label",{htmlFor:"send"}),d.default.createElement("input",{type:"button",name:"send",onClick:function(t){t.preventDefault(),e.setState({spinnerDisplay:!0,showMessageForm:!1}),e.form.style.display="none",F(t).then(function(e){return e.blob()}).then(function(t){e.setState({spinnerDisplay:!1}),S(t,e.qrcanvas,e.qrimg)})},className:"send",defaultValue:"Send!"}))):null}}]),t}(d.default.PureComponent),S=function(){var e=s(regeneratorRuntime.mark(function e(t,a,n){var s,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.getContext("2d"),s.clearRect(0,0,s.canvas.width,s.canvas.height),r=new Image,r.onload=function(){s.drawImage(r,0,0,400,400)},e.next=6,_(t);case 6:o=e.sent,r.src=o,n.src=o;case 9:case"end":return e.stop()}},e,void 0)}));return function(t,a,n){return e.apply(this,arguments)}}(),_=function(e){return new Promise(function(t){var a=new FileReader;a.onload=function(e){t(e.target.result)},a.readAsDataURL(e)})}}},[188]);